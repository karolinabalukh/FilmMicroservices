# üé¨ Film Microservice

–ú—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ñ—ñ–ª—å–º–∞–º–∏ –∑ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—é –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é email-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —á–µ—Ä–µ–∑ Kafka  
—Ç–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —É Elasticsearch –∑ –ø–µ—Ä–µ–≥–ª—è–¥–æ–º —á–µ—Ä–µ–∑ Kibana.

---

–ü—Ä–æ—î–∫—Ç —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ —Ç–∞–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤:

- **Film Service** ‚Äî REST API –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ñ—ñ–ª—å–º—ñ–≤
- **Email Service** ‚Äî Kafka consumer, —è–∫–∏–π –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î email —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—î —Å—Ç–∞—Ç—É—Å
- **Kafka** ‚Äî –±—Ä–æ–∫–µ—Ä –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- **Elasticsearch** ‚Äî –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—ñ–≤ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ email
- **Kibana** ‚Äî –ø–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤ —Ç–∞ —Å—Ç–∞—Ç—É—Å—ñ–≤
- **Docker Compose** ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è –≤—Å—ñ—î—ó —Å–∏—Å—Ç–µ–º–∏

---

## –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è —ñ–∑ –∑–∞–ø—É—Å–∫—É

### –ó–±—ñ—Ä–∫–∞ JAR-—Ñ–∞–π–ª—ñ–≤

–£ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É (–¥–µ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –æ–±–∏–¥–≤–∞ —Å–µ—Ä–≤—ñ—Å–∏) –≤–∏–∫–æ–Ω–∞–π –∫–æ–º–∞–Ω–¥—É:

```bash
mvn clean package -DskipTests 
```

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–∏—Ö –¥–∞–Ω–∏—Ö

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª **`.env`** —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É  
(–ø–æ—Ä—É—á —ñ–∑ `docker-compose.yml`) —Ç–∞ –¥–æ–¥–∞–π—Ç–µ SMTP-–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

```env
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your_email@gmail.com
MAIL_PASSWORD=your_app_password
```



## –î–æ—Å—Ç—É–ø –¥–æ —Å–µ—Ä–≤—ñ—Å—ñ–≤

| –°–µ—Ä–≤—ñ—Å | URL |
|-------|-----|
| Film Service API | http://localhost:8082 |
| Kibana | http://localhost:5601 |
| Elasticsearch | http://localhost:9200/emails/_search?pretty |



## –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º–∏ (Docker)

–î–ª—è –∑–∞–ø—É—Å–∫—É –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤ –≤–∏–∫–æ–Ω–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É:

```bash
docker-compose up --build
```


##–ë–µ–∑–ø–µ–∫–∞ —Ç–∞ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è

–ü—Ä–æ—î–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **OAuth2** —á–µ—Ä–µ–∑ Google.

1. –ü—Ä–∏ –≤—Ö–æ–¥—ñ –Ω–∞ Frontend –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –≤—Ö–æ–¥—É Google.
2. –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –≤—Ö–æ–¥—É Gateway —Å—Ç–≤–æ—Ä—é—î —Å–µ—Å—ñ—é.
3. –ï–Ω–¥–ø–æ—ñ–Ω—Ç `/profile` –ø–æ–≤–µ—Ä—Ç–∞—î –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (—ñ–º'—è, email, —Ñ–æ—Ç–æ).
4. –î–æ—Å—Ç—É–ø –¥–æ API (—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ñ—ñ–ª—å–º—ñ–≤) –¥–æ–∑–≤–æ–ª–µ–Ω–æ –ª–∏—à–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º.

---

##  CI/CD —Ç–∞ –•–º–∞—Ä–∞

### GitHub Actions
–£ –ø—Ä–æ—î–∫—Ç—ñ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π Pipeline (`.github/workflows/main.yml`).

* –ü—Ä–∏ –∫–æ–∂–Ω–æ–º—É `push` –≤ –≥—ñ–ª–∫—É `master` –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∑–±—ñ—Ä–∫–∞ –ø—Ä–æ—î–∫—Ç—É (Maven) —Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è Docker-–æ–±—Ä–∞–∑—ñ–≤.

### Kubernetes (GKE)
–£ –ø–∞–ø—Ü—ñ `k8s/` –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –º–∞–Ω—ñ—Ñ–µ—Å—Ç–∏ –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤ Google Kubernetes Engine:

* `deployment.yaml` ‚Äî –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å–µ—Ä–≤—ñ—Å—ñ–≤.

---



–ó—É–ø–∏–Ω–∏—Ç–∏ –≤—Å—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ —Ç–∞ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ä–µ—Å—É—Ä—Å–∏:

```bash
docker-compose down